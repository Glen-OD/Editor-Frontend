<!DOCTYPE html>
<html>
<head>
<title>QUBeditotron3000</title>

<script type="text/javascript">

//let wordcountURL = "http://wordcount.editor.qpc.hal.davecutting.uk";
let wordcountURL = "http://wordcountapi.40233306.qpc.hal.davecutting.uk";
//let wordcountURL2 = urlHolder.Wordcount;
//let charcountURL = "http://charcount.editor.qpc.hal.davecutting.uk";
let charcountURL = "http://charcountapi.40233306.qpc.hal.davecutting.uk";
let commacountURL = "http://gorestapi.40233306.qpc.hal.davecutting.uk";
let vowelcountURL = "http://pythonrestapi.40233306.qpc.hal.davecutting.uk";
let andcountURL = "http://rubyrestapi.40233306.qpc.hal.davecutting.uk";
let avgwordlengthURL = "http://javarestapi.40233306.qpc.hal.davecutting.uk";

function handleErrors(response) {
    if (!response.ok) {
        throw Error(response.statusText);
    }
    return response;
}


function Wordcount()
{
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var j = JSON.parse(this.response);
            document.getElementById('output').value = j.answer;        
        }   
    };

    let url = wordcountURL + "/?text=" + encodeURI(document.getElementById('content').value);
   // if(handler == 0)
  //  {
   //     xhttp.open("GET",url);
   //     xhttp.send();
  //  }
   // else{  
            fetch(url)
    .then(handleErrors)
    .then(function(response) {
        xhttp.open("GET",url);
        xhttp.send();
    }).catch(function (error) {
    if (error.response) {
      // The request was made and the server responded with a status code
     // console.log('1', error.message);
      console.log(error.response.data);
      console.log(error.response.status);
      console.log(error.response.headers);
    } else if (error.request) {
      // The request was made but no response was received
      //console.log('2', error.message);
      console.log(error.request);
      console.log(error.response.status);
    } else {
      // Something happened in setting up the request that triggered an Error
      //console.log('3', error.message);
      console.log('Error', error.message);
      console.log('Error status 404');
    }
    //console.log('4', error.message);
    //console.log(error.config);
  });

   // }
        


}

function Charcount()
{
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var j = JSON.parse(this.response);
            document.getElementById('output').value = j.answer;
        }
    };

    let url = charcountURL + "/?text=" + encodeURI(document.getElementById('content').value);
    fetch(url)
    .then(handleErrors)
    .then(function(response) {
        xhttp.open("GET",url);
        xhttp.send();
    }).catch(function (error) {
    if (error.response) {
      // The request was made and the server responded with a status code
      console.log(error.response.data);
      console.log(error.response.status);
      console.log(error.response.headers);
    } else if (error.request) {
      // The request was made but no response was received
      console.log(error.request);
      console.log(error.response.status);
    } else {
      // Something happened in setting up the request that triggered an Error
      console.log('Error', error.message);
      console.log('Error status 404');
    }
  });
}

function Vowelcount()
{
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var j = JSON.parse(this.response);
            document.getElementById('output').value = j.answer;
        }
    };

    let url = vowelcountURL + "/?x=" + encodeURI(document.getElementById('content').value);
    xhttp.open("GET",url);
    xhttp.send();
}

function Commacount()
{
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var j = JSON.parse(this.response);
            document.getElementById('output').value = j.answer;
        }
    };

    let url = commacountURL + "/?key=" + encodeURI(document.getElementById('content').value);
    xhttp.open("GET",url);
    xhttp.send();
}

function Andcount()
{
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var j = JSON.parse(this.response);
            document.getElementById('output').value = j.answer;
        }
    };

    let url = andcountURL + "/x=" + encodeURI(document.getElementById('content').value);
    xhttp.open("GET",url);
    xhttp.send();
}

function avgwordlengthcount()
{
    let xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var j = JSON.parse(this.response);
            document.getElementById('output').value = j.answer;
        }
    };

    let url = avgwordlengthURL + "/?sentence=" + encodeURI(document.getElementById('content').value);
    xhttp.open("GET",url);
    xhttp.send();
}


</script>

<style type="text/css">
body  {
    font-size: 150%;
    font-family: monospace;
}

#logo
{
    font-family: Calibri, sans-serif;
    font-weight: lighter;
    color: #505050;
    margin: 0.5em;
}

#editor
{
    text-align: center;
    margin-top: 1em;
}

#output {
    font-size: 100%;
    padding: 0.2em;
    margin: 0.2em;
    font-family: monospace;
    letter-spacing: 0.1em;
}

#content {
    font-size: 100%;
    padding: 0.2em;
    margin: 0.2em;
    font-family: monospace;
    letter-spacing: 0.1em;
}

.operation {
    border: solid #d0d0d0 1px;
    background-color: #f0f0f0;
    padding: 1.5em;
    margin: 1em;
    width: 14em;
}
</style>

<!-- <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"> -->


</head>
<body>
<div id="editor">
    <div id="logo">
        QUBeditotron3000
    </div>
    <div>
        <textarea rows="5" cols="40" id="content">It was the best of cloud, it was the worst of cloud...</textarea>
    </div>
    <div>
        <input type="text" id="output" readonly="1" value="" />
    </div>
    <div>
        <button class="operation" onclick="Wordcount();">Word Count</button>
        <button class="operation" onclick="Charcount();">Character Count</button>
        <!-- <button class="operation" onclick="getURL();">Character Count</button> -->
    </div>
    <div>
        <!-- <button class="operation" onclick="Vowelcount();">Vowel Count</button>
        <button class="operation" onclick="Commacount()">Comma Count</button> -->
    </div>
    <div>
        <div class="container">
            <button id="getData3" class="operation">fetch data And tester</button>
            <button id="getData4" class="operation">filler tester</button>           
        </div> 
    </div>
    <div>
        <div class="container">
            <button id="getData" class="operation">fetch data comma tester</button>
            <button id="getData2" class="operation">fetch data vowel tester</button>        
            <div id="loader" style="margin-top: 10px; display: none;">
                <img src="ajax-loader.gif">
            </div>      
        </div> 
    </div> 
    <div>
        <button class="operation" onclick="avgwordlengthcount();">avg word length Count</button>
    </div>
</div>

<script src="jquery-3.6.0.min.js"></script>
<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> -->
<script>
    $(document).ready(function(){

        $("#getData").on("click",function(){
            let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url2 = commacountURL + "/?key=" + encodeURI(document.getElementById('content').value);
                    
            $.ajax({
                type:"GET",
                url:url2,
                dataType:"json",

                beforeSend: function(){
                    $("#loader").show();
                    $("#getData2").hide();
                    $("#getData3").hide();
                    $("#getData4").hide();
                },


                complete: function(){
                    setTimeout(function(){
                    $("#loader").hide();
                    $("#getData2").show();
                    $("#getData3").show();
                    $("#getData4").show();
                    },1000);
                },
                
                success: function(data){
                        let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url = commacountURL + "/?key=" + encodeURI(document.getElementById('content').value);
                    
                    xhttp.open("GET",url);
                    xhttp.send();
                    
                   /*  var output = "";
                    for(var i in data){
                        output +=`
                            <ul>
                                <li>Id ${data[i].id}</li>
                                    <li>Name ${data[i].name}</li>
                                        <li>Username ${data[i].username}</li>
                            </ul>
                        `;
                    }

                     *///$("#result").html(output);
                  //  M.toast({
                   //     html:'Fetched successfully',
                   //     classes:'green'
                   // });
                },

                error: function(){
                    $("#result").html("error failed to get data");
                   // M.toast({
                    //    html:'Failed to get data',
                   //     classes:'red'
                  // });
                }
            });

        });


    });
</script>
<script>
    $(document).ready(function(){

        $("#getData2").on("click",function(){
            let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url2 = vowelcountURL + "/?x=" + encodeURI(document.getElementById('content').value);

            $.ajax({
                type:"GET",
                url:url2,
                dataType:"json",

                beforeSend: function(){
                    $("#loader").show();
                    $("#getData").hide();
                    $("#getData3").hide();
                    $("#getData4").hide();
                },

                complete: function(){
                    setTimeout(function(){
                    $("#loader").hide();
                    $("#getData").show();
                    $("#getData3").show();
                    $("#getData4").show();
                    },1000);
                },

                success: function(data){
                    let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url = vowelcountURL + "/?x=" + encodeURI(document.getElementById('content').value);
                    xhttp.open("GET",url);
                    xhttp.send();
                   /*  var output = "";
                    for(var i in data){
                        output +=`
                            <ul>
                                <li>Id ${data[i].id}</li>
                                    <li>Name ${data[i].name}</li>
                                        <li>Username ${data[i].username}</li>
                            </ul>
                        `;
                    }

                     *///$("#result").html(output);
                  //  M.toast({
                   //     html:'Fetched successfully',
                   //     classes:'green'
                   // });
                },

                error: function(){
                    $("#result").html("error failed to get data");
                   // M.toast({
                    //    html:'Failed to get data',
                   //     classes:'red'
                  // });
                }
            });

        });


    });
</script>
<script>
    $(document).ready(function(){

        $("#getData3").on("click",function(){
            let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url2 = andcountURL + "/x=" + encodeURI(document.getElementById('content').value);
                    
            $.ajax({
                type:"GET",
                url:url2,
                dataType:"json",

                beforeSend: function(){
                    $("#loader").show();
                    $("#getData2").hide();
                    $("#getData").hide();
                    $("#getData4").hide();
                },


                complete: function(){
                    setTimeout(function(){
                    $("#loader").hide();
                    $("#getData2").show();
                    $("#getData").show();
                    $("#getData4").show();
                    },1000);
                },
                
                success: function(data){
                        let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url = andcountURL + "/x=" + encodeURI(document.getElementById('content').value);
                    
                    xhttp.open("GET",url);
                    xhttp.send();
                    
                   /*  var output = "";
                    for(var i in data){
                        output +=`
                            <ul>
                                <li>Id ${data[i].id}</li>
                                    <li>Name ${data[i].name}</li>
                                        <li>Username ${data[i].username}</li>
                            </ul>
                        `;
                    }

                     *///$("#result").html(output);
                  //  M.toast({
                   //     html:'Fetched successfully',
                   //     classes:'green'
                   // });
                },

                error: function(){
                    $("#result").html("error failed to get data");
                   // M.toast({
                    //    html:'Failed to get data',
                   //     classes:'red'
                  // });
                }
            });

        });


    });
</script>
<!-- <script>
    $(document).ready(function(){

        $("#getData").on("click",function(){
            let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url2 = commacountURL + "/?key=" + encodeURI(document.getElementById('content').value);
                    
            $.ajax({
                type:"GET",
                url:url2,
                dataType:"json",

                beforeSend: function(){
                    $("#loader").show();
                    $("#getData2").hide();
                    $("#getData3").hide();
                    $("#getData4").hide();
                },


                complete: function(){
                    setTimeout(function(){
                    $("#loader").hide();
                    $("#getData2").show();
                    $("#getData3").show();
                    $("#getData4").show();
                    },1000);
                },
                
                success: function(data){
                        let xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            var j = JSON.parse(this.response);
                            document.getElementById('output').value = j.answer;
                        }
                    };
                    
                    let url = commacountURL + "/?key=" + encodeURI(document.getElementById('content').value);
                    
                    xhttp.open("GET",url);
                    xhttp.send();
                    
                   /*  var output = "";
                    for(var i in data){
                        output +=`
                            <ul>
                                <li>Id ${data[i].id}</li>
                                    <li>Name ${data[i].name}</li>
                                        <li>Username ${data[i].username}</li>
                            </ul>
                        `;
                    }

                     *///$("#result").html(output);
                  //  M.toast({
                   //     html:'Fetched successfully',
                   //     classes:'green'
                   // });
                },

                error: function(){
                    $("#result").html("error failed to get data");
                   // M.toast({
                    //    html:'Failed to get data',
                   //     classes:'red'
                  // });
                }
            });

        });


    });
</script> -->
</body>


</html>
